<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"/>
<title>JA++ Compiling</title>
<link href="styles.css" rel="stylesheet" />
<script type="text/javascript" language="javascript">
function hide( id ) {
	document.getElementById( id ).style.display = 'none';
}
function show( id ) {
	var buttonID = ('button_' + id);
	document.getElementById( id ).style.display = '';
	for ( i=0; i<document.getElementsByTagName( 'input' ).length; i++ ) {
		if ( document.getElementsByTagName( 'input' )[i].id != buttonID ) {
			document.getElementsByTagName( 'input' )[i].style.fontWeight = 'normal';
		}
	}
	document.getElementById( buttonID ).style.fontWeight = 'bold';
}
</script>
</head>
<body onload="init_bar();">
<h1>Compiling</h1>

<hr />

<div id="pagewrap">
	<div align="center">
		<input id="button_win" type="button" onClick="show( 'win' ); hide( 'linux' )" class="button" value="Windows" />
		<input id="button_linux" type="button" onClick="hide( 'win' ); show( 'linux' )" class="button" value="Linux" />
	</div>

	<div id="win" style="display:none;">
		<h1>Install dependencies</h1>
		<ul>
			<li><a href="http://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/tdm64-gcc-5.1.0-2.exe/download">TDM-GCC (64 bit)</a> (tdm64-gcc-5.1.0-2.exe)</a><br />
			Make sure it's installed to your <span class="code">%PATH%</span></li>
			<li><a href="https://www.python.org/ftp/python/2.7.10/python-2.7.10.amd64.msi">Python 2.7.10 (64 bit)</a> (python-2.7.10.amd64.msi<br />
			Enable <em>Install python.exe to Path</em></li>
			<!--<li>Download PyWin32 Extensions: <a href="http://sourceforge.net/projects/pywin32/files/pywin32/Build%20219/pywin32-219.win32-py2.7.exe/download">pywin32-219.win32-py2.7.exe</a></li>-->
			<li><a href="http://sourceforge.net/projects/scons/files/scons/2.4.0/scons-2.4.0-amd64-setup.exe/download">SCons 2.4.0</a> (scons-2.4.0-setup.exe)<br />
			Don't change installation options.</li>
		</ul>
		<h1>For personal use</h1>
		<ol>
			<li>Download the <a href="https://github.com/Razish/japp/archive/master.zip">JA++ code</a> (japp_master.zip) and unzip it</li>
			<li>Open a command prompt window from the japp-master directory and type:</li>
			<div class="term">scons no_sql=1</div>
			<li>Copy files from <span class="code">japp_master/*.dll</span> to <span class="code">GameData/japlus/*.dll</span>, zip them up and rename to <span class="code">cl_bins_win32.pk3</span></li>
		</ol>

		<h1>For contributors</h1>
		<p>This assumes you have git, lua, python, scons and codelite in your <span class="code">%PATH%</span></p>
		<ol>
			<li>Fork the repo on GitHub (<a href="https://github.com/Razish/japp">Razish/japp</a>)</li>
			<li>Open a command prompt window from the japp-master directory and type:</li>
			<div class="term">scons no_sql=1</div>
			<li>Copy files from <span class="code">japp_master/*.dll</span> to <span class="code">GameData/japlus/*.dll</span>, zip them up and rename to <span class="code">cl_bins_win32.pk3</span></li>
		</ol>
	</div>

	<div id="linux" style="display:none;">
		<ol>
			<li>Install tools and dependencies<br />
			<div class="term">$ sudo apt-get install git scons gcc g++ libreadline-dev</div></li>
			<li>Download the repository<br />
			<div class="term">$ git clone https://github.com/Razish/japp.git
$ cd japp</div></li>
			<li>Compile and copy files to JA installation<br />
			<div class="term">$ scons
$ cp ./*.so /path/to/jka/japlus/</div></li>
			<li>If you want to share these files, you can automatically package them using the Lua script<br />
			<div class="term">$ sudo apt-get install lua5.2 lua-filesystem p7zip-full
$ lua package.lua</div><br />
		This will produce two <span class="code">.zip</span> files containing the binaries.</li>
		</ol>
		<hr />
		There are other options you can specify as arguments to <span class="code">scons</span>
		<ul>
			<li><span class="code">force32</span> 1 to build a 32-bit binary on a 64-bit machine</li>
			<li><span class="code">debug</span> 1 to generate debug information, 2 to also optimise code</li>
		</ul>
		<hr />
		Or the following environment variables:
		<ul>
			<li><span class="code">NO_SSE=1</span> to not generate SSE2 instructions - closer to basejka. This is used for official builds</li>
			<li><span class="code">MORE_WARNINGS=1</span> to enable more compiler warnings</li>
		</ul>
	</div>
</div>

<script async src="http://assets.jkhub.org/bar/jkhub_bar.js"></script>
</body>
</html>
